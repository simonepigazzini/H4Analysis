importCfg cfg/ECAL_H4_October2018/ECAL_H4_Oct2018_base_160MHz.cfg

h4reco.pluginList+= AdditionalInfo ECALReco
h4reco.maxFiles -1
WFReco.fillWFtree 0

<ECALReco>
pluginType ECALMatrixReco
channels= VFEs
</ECALReco>

<AdditionalInfo>
pluginType InfoTreeMaker
treeName   info
trackedVariable 'h4reco.run'
mappedVarsNum Energy Temperature
mappedVarsStr Positions

originValues 13360 13368 13376 13383 13391 \
             13523 13524 13526 13527 13531 13532 13533 13534 13535 13536 13537 13538 13540 13541 13542 13543 13544 13545 13546 13547 13548 13549 \
             13398 13399 13400 13401 13402 13403 13404 13405 13406 13407 13408 13409 13410 13411 13412 13413 13414 13415 \
             13416 13417 13418 13419 13420 13421 13550 13551 13552 13553 \
             13559 13360 13361 13362 13363 13364 13365 13366 13367 13368 13369 13370 13371 13372 13373 13374 13375 13376 13377 13378 \
             13379 13380 13381 13382 13383 13384 13385 13386 13387 13388 13389 13390 13391 13392 13393 13394 13395 13396 13397 \
             13338 13341 13342 13343 13345 13346 13347 13349 13350 13351 13352 13353 13355
             
Energy 243.48 197.27 149.12 99.83 49.99 \
       243.48 243.48 243.48 243.48 243.48 243.48 197.27 197.27 197.27 197.27 197.27 197.27 149.12 149.12 149.12 149.12 99.83 99.83 99.83 99.83 49.99 49.99 \
       149.12 149.12 149.12 149.12 149.12 149.12 149.12 149.12 149.12 149.12 149.12 149.12 149.12 149.12 149.12 149.12 149.12 149.12 \       
       149.12 197.27 197.27 197.27 243.48 243.48 49.99 49.99 49.99 49.99 \
       0. 243.48 243.48 243.48 243.48 243.48 243.48 243.48 243.48 197.27 197.27 197.27 197.27 197.27 197.27 197.27 197.27 149.12 149.12 149.12 \
       149.12 149.12 149.12 149.12 99.83 99.83 99.83 99.83 99.83 99.83 99.83 99.83 49.99 49.99 49.99 49.99 49.99 49.99 49.99 \
       243.48 243.48 243.48 243.48 197.27 197.27 197.27 149.12 99.83 49.99 49.99 243.48 243.48

Temperature 18 18 18 18 18 \
            18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 \
            18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 \
            18 18 18 18 18 18 18 18 18 \
            18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 \
            18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 18 \
            18 18 18 18 18 18 18 18 18 18 18 18 18

Positions C3 C3 C3 C3 C3 \
          C3DL C3DL C3DR C3DR C3UL C3UR C3DL C3DR C3UL C3UL C3UL C3UR C3DL C3DR C3UL C3UR C3DL C3DR C3UL C3UR C3DL C3DL \
          A1 A2 A3 B1 B2 B3 B4 B5 C1 C5 D5 D4 D3 D2 D1 E1 E2 E3 \
          C3 C3 C3 C3 C3 C3 C3DR C3UL C3UR C3UR \   
          Pedestal C3 C2 C4 C3_down C3_up C3_right C3_right C3_left C3 C2 C2 C4 C3_up C3_down C3_left C3_right C3 C2 C4 C3_up \
          C3_down C3_left C3_right C3 C2 C4 C3down C3up C3left C3right C3 C3 C2 C4 C3up C3down C3left C3right \
          C3 C3 C3 C3 C3 C3 C3 C3 C3 C3 C3 C3 C3 

</AdditionalInfo>

#---time and amplitude calibration coefficients
ECAL.ampl_ic 0.832211922935919 0.859845070583671 1.001589635297481 \
             0.8517702941512554 0.8119183928352758 0.924683885408 0.9260386707682021 0.96456028960152 \
             0.8859580364450783 0.8694804266109897 1.0            0.935557257765839 1.2801041582597155 \
             1.1181218466754075 0.8899021512317321 1.014268079534218 0.9462961152611834 1.1969977509708225 \
             0.8053162376975863 0.7673953445225852 0.874006980660226 

ECAL.time_ic -0.984250367040739 -1.0912013968566727 -0.5638637326174281 \
             -1.069829115296633 -1.0069465534052902 -0.31270074874205966 -0.24041127772715254 0.00432935192301831 \
             0.2104558963834411 0.4229208469268334 0.0                   -0.4528696882073131 -0.3577510499757033 \
             0.10229758229558383 -0.26929642609842097 0.2892402513543806 0.32949954003965 0.39254681363919386 \
             0.001337352698455696 -0.04016715074875643 -0.17328258820079734 

energy_conversion_factor       0.024363368936077504 
energy_conversion_factor_sum3  0.025763468226556327 
energy_conversion_factor_sum5  0.025305912897253296 

ECAL.ampl_tmplfit_thr 100 100 100 \
                      100 10 10 10 100 \
                      100 10 10 10 100 \
                      100 10 10 10 100 \
                      100 100 100

for i,ch VFEs
<$ch>
#---template fit options
<templateFit>
file data/phase_corrected_tmpl_18deg.root tmpl_C3
amplitudeThreshold ECAL.ampl_tmplfit_thr[$i]
fitWin 0 3. 5.
</templateFit>
amplitudeCalib $ECAL.ampl_ic[$i]
timeCalib $ECAL.time_ic[$i]
</$ch>
end
