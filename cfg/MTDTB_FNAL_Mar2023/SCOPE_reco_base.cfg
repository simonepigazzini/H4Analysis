<h4reco>
outNameSuffix /tmp/meridian/
path2data /eos/cms/store/group/dpg_mtd/comm_mtd/TB/MTDTB_FNAL_Mar2023/KeySightScope/TimingDAQRECO/RecoWithTracks/v1/
run 66353
dataType scopeFNALTree
maxEvents -1
maxFiles -1
preProcessorType ScopeFNALPreProcessor
pluginList DigiReco WFReco
</h4reco>

SCOPE TOFCLK_P TOFCLK_P_1 TOFCLK_P_2 TOFCLK_M TOFCLK_M_1 TOFCLK_M_2 MCP

#---VFE config
<DigiReco>
pluginType DigitizerReco
channelsNames= SCOPE
</DigiReco>

#---WF reconstruction for VFEs
<WFReco>
pluginType WFAnalyzer
srcInstanceName DigiReco
channelsNames= DigiReco.channelsNames 
timeRecoTypes LED CFD CLK
fillWFtree 1
WFtreePrescale 1
</WFReco>

#---Scope channels
<TOFCLK_P>
digiBoard 0
digiGroup 0
digiChannel 0
type Clock
polarity 1
nSamples 800
tUnit 0.05
#CFD
CLK -0.8 0.8 
LED 0 2 2 100 400
baselineFit 1
baselineWin 150 600 
baselineInt 150 600
signalWin 100 700 5 pol2
signalInt 100 700
<templateFit>  
file data/tmpl_CLK_FNAL_Mar2023_large.root tmpl_TOFCLK_large
fitWin 0. 15 45
</templateFit>
</TOFCLK_P>

<TOFCLK_P_1= TOFCLK_P>
copyChannel TOFCLK_P 0 400
nSamples 400
CLK -0.8 0.8 50 350
LED 0 2 2 10 350
baselineWin 150 350 
baselineInt 150 350
baselineWin 50 350 
baselineInt 50 350
signalWin 50 350 5 pol2
signalInt 50 350
</TOFCLK_P_1>

<TOFCLK_P_2= TOFCLK_P_1>
copyChannel TOFCLK_P 400 800
</TOFCLK_P_2>

<TOFCLK_M= TOFCLK_P>
polarity -1
<templateFit>  
file data/tmpl_CLK_M_FNAL_Mar2023_large.root tmpl_TOFCLK_M_large
fitWin 0. 15 45
</templateFit>
</TOFCLK_M>

<TOFCLK_M_1= TOFCLK_P_1>
copyChannel TOFCLK_M 0 400
<templateFit>  
file data/tmpl_CLK_M_FNAL_Mar2023_large.root tmpl_TOFCLK_M_large
fitWin 0. 15 45
</templateFit>
</TOFCLK_M_1>

<TOFCLK_M_2= TOFCLK_M_1>
copyChannel TOFCLK_M 400 800
</TOFCLK_M_2>

<MCP>
digiBoard 0
digiGroup 0
digiChannel 3
polarity -1
nSamples 800
tUnit 0.05
baselineWin 1 100
baselineInt 10 90
signalWin 50 700 5 gaus
signalInt 40 40
CFD 0.5 5
LED 20 2 2
# <templateFit>  
# file data/digitizer_templates_H4_Oct2018.root tmpl_MCP1
# fitWin 0. 10 21
# </templateFit>
</MCP>
